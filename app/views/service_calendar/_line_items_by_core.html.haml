- if tab == "consolidated"
  - arm = Sparc::Arm.where(id: arm.sparc_id).first if Sparc::Arm.where(id: arm.sparc_id).any?
  - arm.line_items_grouped_by_core.each do |core, line_items|
    .row.core{id: "arm_#{arm.id}_core_#{core.id}"}
      .col-xs-12= "#{core.name}"
    - line_items.each do |li|
      = render partial: 'service_calendar/line_item', locals: {line_item: li, page: page, tab: tab}
    %div{id: "arm_#{arm.id}_end_of_core_#{core.id}"}

- else
  - arm.line_items_grouped_by_core.each do |core_id, line_items|
    .row.core{id: "arm_#{arm.id}_core_#{core_id}"}
      .col-xs-12= "#{line_items[0].sparc_core_name}"
    - line_items.each do |li|
      = render partial: 'service_calendar/line_item', locals: {line_item: li, page: page, tab: tab}
    %div{id: "arm_#{arm.id}_end_of_core_#{core_id}"}