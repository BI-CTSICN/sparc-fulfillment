#incomplete_all_modal.modal-dialog
  .modal-content
    .modal-header
      %button.close.close_modal{type: 'button', data: {dismiss: 'modal'}}
        %span{aria: {hidden:'true'}} &times;
        %span.sr-only
          = t(:actions)[:close]
      %h4.modal-title.text-center
        = t(:incomplete_complete_modal)[:incomplete_header]
    = form_tag update_procedures_multiple_procedures_path, method: 'put', remote: true, class: "form-horizontal", role: "form" do
      .modal-body.form-horizontal
        #incomplete_modal_errors
        - @procedures.each do |procedure|
          = hidden_field_tag 'procedure_ids[]', procedure.id
        = hidden_field_tag :status, "incomplete"
        .form-group
          = label_tag "incompleted_date", t(:incomplete_complete_modal)[:incompleted_date], class: "col-sm-4 control-label"
          .col-sm-7
            .input-group.date.modal_incompleted_date_field
              %input.datetimepicker{type: "text", class: "form-control"}
              = hidden_field_tag "incompleted_date", {class: "form-control datetimepicker", value: format_date(@procedures.first.completed_date)}
              %span.input-group-addon{ class: "#{ @procedures.first.appt_started? ? '' : 'pre_start_disabled' }" }
                %span.glyphicon.glyphicon-calendar
        .form-group
          = label_tag "performed_by", t(:incomplete_complete_modal)[:performed_by], class: "col-sm-4 control-label"
          .col-sm-7.modal-performed-by
            = select_tag "performed_by", options_for_select(@procedures.first.performable_by, @procedures.first.performer_id), include_blank: "N/A", class: "performed-by-dropdown selectpicker", data: { width: '125px' }, 'showIcon' => false
        .form-group
          = label_tag "reason", t(:incomplete_complete_modal)[:reason], class: "col-sm-4 control-label"
          .col-sm-7
            = select_tag "reason", options_for_select(Procedure::NOTABLE_REASONS), prompt: "Select a reason", class: "selectpicker form-control reason-select"
        .form-group
          = label_tag "comment", t(:notes)[:comment], class: "col-sm-4 control-label"
          .col-sm-7
            = text_area_tag :comment, nil, class: 'form-control', rows: "6"
      .modal-footer
        .center-block
          %button.btn.btn-default.cancel.close_modal{type: 'button', data: {dismiss: 'modal'}}
            = t(:actions)[:close]
          %button.btn.btn-primary.save{type: 'submit'}
            = t(:actions)[:save]



